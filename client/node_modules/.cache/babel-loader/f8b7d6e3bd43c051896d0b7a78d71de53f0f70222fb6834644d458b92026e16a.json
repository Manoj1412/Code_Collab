{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=_ref=>{let{socket,roomId,username,theme}=_ref;const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[loading,setLoading]=useState(false);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messages]);useEffect(()=>{if(socket){socket.on('chat-message',data=>{setMessages(prev=>[...prev,data]);});return()=>{socket.off('chat-message');};}},[socket]);const handleSubmit=e=>{e.preventDefault();if(newMessage.trim()&&socket){setLoading(true);const messageData={roomId,message:newMessage.trim(),username};socket.emit('chat-message',messageData);setNewMessage('');setLoading(false);}};if(!socket)return null;const isDark=theme==='dark';return/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 border-l flex flex-col \".concat(isDark?'bg-gray-800 border-gray-600':'bg-white border-gray-200'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b \".concat(isDark?'bg-gray-700 border-gray-600':'bg-gray-50 border-gray-200'),children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold \".concat(isDark?'text-white':'text-gray-900'),children:\"Chat\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4 \".concat(isDark?'bg-gray-800':''),children:[messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(msg.username===username?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xs px-3 py-2 rounded-lg \".concat(msg.username===username?'bg-indigo-500 text-white':isDark?'bg-gray-700 text-gray-100':'bg-gray-100 text-gray-900'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium\",children:msg.username}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:msg.message}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs mt-1 \".concat(isDark?'opacity-75 text-gray-300':'opacity-75'),children:new Date(msg.timestamp).toLocaleTimeString()})]})},index)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"p-4 border-t \".concat(isDark?'bg-gray-700 border-gray-600':'border-gray-200'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMessage,onChange:e=>setNewMessage(e.target.value),placeholder:\"Type a message...\",className:\"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 \".concat(isDark?'bg-gray-600 border-gray-500 text-white placeholder-gray-300 focus:ring-indigo-400':'border-gray-300 focus:ring-indigo-500'),disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!newMessage.trim(),className:\"px-4 py-2 rounded-md hover:opacity-90 disabled:opacity-50 \".concat(isDark?'bg-indigo-600 text-white':'bg-indigo-600 text-white hover:bg-indigo-700'),children:\"Send\"})]})})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","Chat","_ref","socket","roomId","username","theme","messages","setMessages","newMessage","setNewMessage","loading","setLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","on","data","prev","off","handleSubmit","e","preventDefault","trim","messageData","message","emit","isDark","className","concat","children","map","msg","index","Date","timestamp","toLocaleTimeString","ref","onSubmit","type","value","onChange","target","placeholder","disabled"],"sources":["C:/Users/kukka/OneDrive/Pictures/OneDrive/Desktop/Code_Collab/client/src/components/Editor/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nconst Chat = ({ socket, roomId, username, theme }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on('chat-message', (data) => {\r\n        setMessages(prev => [...prev, data]);\r\n      });\r\n\r\n      return () => {\r\n        socket.off('chat-message');\r\n      };\r\n    }\r\n  }, [socket]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (newMessage.trim() && socket) {\r\n      setLoading(true);\r\n      const messageData = {\r\n        roomId,\r\n        message: newMessage.trim(),\r\n        username\r\n      };\r\n      socket.emit('chat-message', messageData);\r\n      setNewMessage('');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!socket) return null;\r\n\r\n  const isDark = theme === 'dark';\r\n\r\n  return (\r\n    <div className={`w-80 border-l flex flex-col ${isDark ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'}`}>\r\n      <div className={`p-4 border-b ${isDark ? 'bg-gray-700 border-gray-600' : 'bg-gray-50 border-gray-200'}`}>\r\n        <h3 className={`text-lg font-semibold ${isDark ? 'text-white' : 'text-gray-900'}`}>Chat</h3>\r\n      </div>\r\n      <div className={`flex-1 overflow-y-auto p-4 space-y-4 ${isDark ? 'bg-gray-800' : ''}`}>\r\n        {messages.map((msg, index) => (\r\n          <div key={index} className={`flex ${msg.username === username ? 'justify-end' : 'justify-start'}`}>\r\n            <div className={`max-w-xs px-3 py-2 rounded-lg ${\r\n              msg.username === username \r\n                ? 'bg-indigo-500 text-white' \r\n                : isDark \r\n                  ? 'bg-gray-700 text-gray-100' \r\n                  : 'bg-gray-100 text-gray-900'\r\n            }`}>\r\n              <div className=\"text-sm font-medium\">{msg.username}</div>\r\n              <div className=\"text-sm\">{msg.message}</div>\r\n              <div className={`text-xs mt-1 ${isDark ? 'opacity-75 text-gray-300' : 'opacity-75'}`}>\r\n                {new Date(msg.timestamp).toLocaleTimeString()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      <form onSubmit={handleSubmit} className={`p-4 border-t ${isDark ? 'bg-gray-700 border-gray-600' : 'border-gray-200'}`}>\r\n        <div className=\"flex space-x-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            placeholder=\"Type a message...\"\r\n            className={`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${\r\n              isDark \r\n                ? 'bg-gray-600 border-gray-500 text-white placeholder-gray-300 focus:ring-indigo-400' \r\n                : 'border-gray-300 focus:ring-indigo-500'\r\n            }`}\r\n            disabled={loading}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading || !newMessage.trim()}\r\n            className={`px-4 py-2 rounded-md hover:opacity-90 disabled:opacity-50 ${\r\n              isDark \r\n                ? 'bg-indigo-600 text-white' \r\n                : 'bg-indigo-600 text-white hover:bg-indigo-700'\r\n            }`}\r\n          >\r\n            Send\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}